extends layout

block content
  main
    section.section
      br
      .container
        section.hero.is-small.is-dark
          .hero-body
            h1.title
              | Serverstatus
            h2.subtitle
              each loc, i in locations
                if i != 0
                  | &nbsp;| 
                | #{loc.name}&nbsp;Status:&nbsp;
                if loc.alive
                  span.has-text-success ON
                else
                  span.has-text-danger OFF
        br
        br
        br
        .tabs.is-large.is-centered
          ul
            each loc in locations
              li(class={'is-active': loc.name === location.name})
                a(href='/serverstatus/'+loc.name)= loc.name
        if !location.alive
          p.has-text-centered
            | This location is currently offline.
        else
          .columns.is-multiline
            each server in location.servers.sort((a, b) => ((b.reachable ? 1 : 0) - (a.reachable ? 1 : 0)) || ((b.players ? b.players.length : 0) - (a.players ? a.players.length : 0)) || (a.name > b.name ? 1 : -1))
              .column.is-full-tablet.is-half-desktop.is-one-third-fullhd
                .notification.is-white.servernot
                  .serverbox
                    .serverinfobox
                      h2.subtitle.servername= server.name
                      if server.reachable
                        |  
                        span.servermap=server.map
                        |  
                        span.servercount #{server.players ? server.players.length : 0} / #{server.maxclients}
                    if server.reachable
                      .is-unselectable.serverreach.serveron &nbsp;
                    else
                      .serverreach.serverofftext Offline
                      .is-unselectable.serverreach.serveroff &nbsp;
                    .serverplayers
                      if server.reachable
                        if server.numclients
                          table.table.is-narrow.is-fullwidth
                            thead
                              tr
                                th.is-unselectable &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                th Player
                                th Clan
                            tbody
                              each player in server.players
                                tr
                                  td
                                    img(src='/img/twflags/'+player.flag+'.png')
                                  td= player.name
                                  td= player.clan
